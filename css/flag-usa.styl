@import 'nib/vendor'
@import 'nib/flex'

/*
 * CSS is Patrotic
 *   By Ildar Sagdejev ( http://twitter.com/tknomad )
 *
 * Official flag proportions:
 *   http://www.usflag.org/flagspecs.html
 */

//
// Parameters
//
h = 420px   // "hoist"
w = h * 1.9 // "fly"

color_star = white
color_union = darkblue
colors_stripes = red, white

//
// Automatic
//
w_union = (h * 0.76)
h_union = (h * 7/13)
margin_union = h * (0.054 - 0.0616/2)

.flag
  width w
  height h
  background-image linear-gradient(colors_stripes[0] 50%, colors_stripes[1] 50%)
  background-size 1px (2 * h / 13)
  .union
    width w_union
    height h_union
    background-color color_union
    position relative
    .stars
      width w_union - 2 * margin_union
      height h_union - 2 * margin_union
      margin margin_union
      position absolute
      tilt_bottom = 38deg
      tilt_side   = 71deg
      tilt_tall   = 144deg
      stop_bottom = 5.82%
      stop_side   = 8.6%
      stop_tall   = 9.3%
      angles = -(tilt_bottom), tilt_bottom, -(tilt_side), tilt_side, -(tilt_tall), tilt_tall
      stops = stop_bottom, stop_side, stop_tall
      offsets_x = -16.05%, 6.1% // left side, right side
      offsets_y = 13.8%, 6.8%   // point up, point down
      colors = color_star, color_union
      dx = 11px
      dy = 14.2px
      // Inspired by: http://lea.verou.me/css3patterns/#stars
      background \
        linear-gradient(angles[0], colors[1] stops[0], transparent 0) offsets_x[0] offsets_y[0],
        linear-gradient(angles[1], colors[1] stops[0], transparent 0) offsets_x[1] offsets_y[0],
        linear-gradient(angles[2], colors[0] stops[1], transparent 0) offsets_x[0] offsets_y[0],
        linear-gradient(angles[3], colors[0] stops[1], transparent 0) offsets_x[1] offsets_y[0],
        linear-gradient(angles[4], colors[0] stops[2], transparent 0) offsets_x[0] offsets_y[1],
        linear-gradient(angles[5], colors[0] stops[2], transparent 0) offsets_x[1] offsets_y[1],
        linear-gradient(angles[0], colors[1] stops[0], transparent 0) offsets_x[0]+dx offsets_y[0]+dy,
        linear-gradient(angles[1], colors[1] stops[0], transparent 0) offsets_x[1]+dx offsets_y[0]+dy,
        linear-gradient(angles[2], colors[0] stops[1], transparent 0) offsets_x[0]+dx offsets_y[0]+dy,
        linear-gradient(angles[3], colors[0] stops[1], transparent 0) offsets_x[1]+dx offsets_y[0]+dy,
        linear-gradient(angles[4], colors[0] stops[2], transparent 0) offsets_x[0]+dx offsets_y[1]+dy,
        linear-gradient(angles[5], colors[0] stops[2], transparent 0) offsets_x[1]+dx offsets_y[1]+dy

      // 5.5 tiles across and 4.5 tiles vertically
      background-size (100/5.5)% (100/4.5)%

//
// Presentation
//

@font-face
  // source: http://www.fontsquirrel.com/fonts/oswald
  font-family Oswald
  src url('../fonts/oswald.woff') format('woff'), url('../fonts/oswald.otf') format('opentype')

html
  height 100%
body
  min-height 100%
  margin 0
  display flex
  flex-flow column
  align-items center
  justify-content center
  overflow scroll
  /* Pattern by: Nate Eagle
   *   http://lea.verou.me/css3patterns/#upholstery
   */
  background \
    radial-gradient(hsl(0, 100%, 27%) 4%, hsl(0, 100%, 18%) 9%, hsla(0, 100%, 20%, 0) 9%) 0 0,
    radial-gradient(hsl(0, 100%, 27%) 4%, hsl(0, 100%, 18%) 8%, hsla(0, 100%, 20%, 0) 10%) 50px 50px,
    radial-gradient(hsla(0, 100%, 30%, 0.8) 20%, hsla(0, 100%, 20%, 0)) 50px 0,
    radial-gradient(hsla(0, 100%, 30%, 0.8) 20%, hsla(0, 100%, 20%, 0)) 0 50px,
    radial-gradient(hsla(0, 100%, 20%, 1) 35%, hsla(0, 100%, 20%, 0) 60%) 50px 0,
    radial-gradient(hsla(0, 100%, 20%, 1) 35%, hsla(0, 100%, 20%, 0) 60%) 100px 50px,
    radial-gradient(hsla(0, 100%, 15%, 0.7), hsla(0, 100%, 20%, 0)) 0 0,
    radial-gradient(hsla(0, 100%, 15%, 0.7), hsla(0, 100%, 20%, 0)) 50px 50px,
    linear-gradient(45deg, hsla(0, 100%, 20%, 0) 49%, hsla(0, 100%, 0%, 1) 50%, hsla(0, 100%, 20%, 0) 70%) 0 0,
    linear-gradient(-45deg, hsla(0, 100%, 20%, 0) 49%, hsla(0, 100%, 0%, 1) 50%, hsla(0, 100%, 20%, 0) 70%) 0 0
  background-color #300
  background-size 100px 100px
.flag
  box-shadow 4px 4px 18px 6px rgba(0,0,0,0.6)
  margin 1.2em auto
a
  color yellow
  text-decoration none
.notice
  font-family Oswald
  font-size 21px
  color #ccc
  text-shadow 1px 1px 2px black
  background-image radial-gradient(ellipse closest-side, rgba(0,0,0,0.33), transparent)
  text-align center
  margin 0 1em
  h1
    color #ececec
    text-transform uppercase
    border-bottom 1px white solid
    display inline-block
    margin 0
  p
    margin 0.5em auto
    a:hover
      color #ff4700
  .link
    text-shadow none
    display block